Микросервисная система классификации рукописных цифр (MNIST)

1. Описание проекта

Данный проект представляет собой распределённую микросервисную систему для классификации рукописных цифр на основе датасета MNIST. Система разработана в рамках проектного задания по дисциплине и предназначена для демонстрации:
	•	принципов микросервисной архитектуры;
	•	контейнеризации с использованием Docker и docker-compose;
	•	интеграции ML-моделей (PyTorch) в распределённые системы;
	•	реализации пользовательского веб-интерфейса для инференса модели.

Проект реализован на языке Python с использованием Flask и PyTorch.

⸻

2. Постановка задачи

Цель проекта — разработать систему микросервисов, поддерживающую обучение, дообучение и применение модели машинного обучения для задачи классификации рукописных цифр.

В качестве ML-задачи выбрана классификация изображений цифр (0–9) на основе датасета MNIST.

⸻

3. Архитектура системы

Система состоит из следующих независимых микросервисов:
	1.	Collector — сборщик данных
	2.	Storage — хранилище данных и моделей
	3.	ML Service — обучение и инференс ML-модели
	4.	Web Master — API Gateway, реализующий сценарии использования
	5.	Visualization — пользовательский веб-интерфейс

Все сервисы разворачиваются в отдельных Docker-контейнерах и взаимодействуют по REST API.

⸻

4. Описание микросервисов

4.1 Collector

Назначение:
	•	загрузка и хранение датасета MNIST;
	•	выдача батчей данных по запросу;
	•	приём пользовательских изображений для последующего дообучения.

Основные эндпоинты:
	•	GET /health
	•	GET /batch
	•	POST /user-data

⸻

4.2 Storage

Назначение:
	•	хранение изображений;
	•	хранение истории предсказаний;
	•	хранение и версионирование моделей.

Технологии:
	•	SQLite (метаданные);
	•	файловая система (изображения, .pth модели).

Основные эндпоинты:
	•	POST /images, GET /images
	•	POST /predictions, GET /predictions
	•	POST /models, GET /models

⸻

4.3 ML Service

Назначение:
	•	обучение CNN-модели на MNIST;
	•	инференс (предсказание цифры);
	•	дообучение модели;
	•	сохранение версий моделей.

Технологии:
	•	PyTorch;
	•	CNN (свёрточная нейронная сеть).

Основные эндпоинты:
	•	POST /train
	•	POST /fine-tune
	•	POST /predict
	•	GET /models

⸻

4.4 Web Master (API Gateway)

Назначение:
	•	единая точка входа в систему;
	•	маршрутизация запросов;
	•	реализация сценариев использования;
	•	агрегация данных из сервисов.

Основные сценарии:
	•	обучение модели;
	•	распознавание цифры;
	•	просмотр истории предсказаний;
	•	просмотр версий моделей.

⸻

4.5 Visualization

Назначение:
	•	интерактивный пользовательский интерфейс;
	•	отрисовка цифры с помощью Canvas;
	•	отображение результата классификации;
	•	просмотр истории запросов.

Реализация:
	•	Flask + HTML + JavaScript (Canvas API).

⸻

5. Используемые технологии
	•	Python 3.10
	•	Flask
	•	PyTorch
	•	Docker / docker-compose
	•	SQLite
	•	HTML / JavaScript

⸻

6. Запуск проекта

6.1 Требования
	•	Docker >= 20.x
	•	Docker Compose

6.2 Запуск

Из корня проекта выполните:

docker-compose up --build

После запуска сервисы будут доступны:

Сервис	Адрес

Web Master	http://localhost:8000

Visualization	http://localhost:8050

Collector	http://localhost:5001

Storage	http://localhost:5002

ML Service	http://localhost:5003


⸻

7. Примеры сценариев использования

7.1 Обучение модели

curl -X POST http://localhost:8000/train

7.2 Распознавание цифры

Через веб-интерфейс:
	•	открыть http://localhost:8050;
	•	нарисовать цифру;
	•	нажать «Распознать».

7.3 Просмотр истории
	•	перейти на страницу «История предсказаний» в интерфейсе.

⸻

8. Структура репозитория

project-root/
│
├─ collector/         # Сервис Collector
│   ├ Dockerfile
│   ├ collector.py
│   ├ requirements.txt
│   └ config.yaml
│
├─ storage/           # Сервис Storage
│   ├ Dockerfile
│   ├ storage.py
│   ├ requirements.txt
│   └ config.yaml
│
├─ ml_service/        # Сервис ML (обучение/инференс)
│   ├ Dockerfile
│   ├ ml_service.py
│   ├ model_utils.py
│   ├ requirements.txt
│   └ config.yaml
│
├─ web_master/        # Сервис Web Master (API-шлюз)
│   ├ Dockerfile
│   ├ web_master.py
│   ├ requirements.txt
│   └ config.yaml
│
├─ visualization/     # Сервис Visualization (GUI)
│   ├ Dockerfile
│   ├ app.py (или app_dash.py)
│   ├ requirements.txt
│   └ templates/, static/  # HTML/CSS/JS
│
├─ docker-compose.yml
└─ README.md


⸻

9. Соответствие критериям задания
	•	✔ микросервисная архитектура
	•	✔ контейнеризация Docker
	•	✔ ML-модель и инференс
	•	✔ дообучение модели
	•	✔ версионирование моделей
	•	✔ GUI и сценарии использования
	•	✔ документация

⸻

10. Заключение

Проект демонстрирует полный цикл разработки распределённой ML-системы: от сбора данных и обучения модели до пользовательского интерфейса и контейнеризированного деплоя. Архитектура легко масштабируется и может быть расширена дополнительными источниками данных, моделями или сценариями использования.